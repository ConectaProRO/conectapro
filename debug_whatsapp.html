<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug WhatsApp - ConectaPro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f2f5;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #25D366;
            margin-bottom: 30px;
            font-size: 24px;
        }
        
        .test-group {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e3f2fd;
            border-radius: 15px;
            background: #f8f9fa;
        }
        
        .test-group h3 {
            color: #1976d2;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 8px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn-whatsapp {
            background: #25D366;
            color: white;
        }
        
        .btn-whatsapp:hover {
            background: #128C7E;
            transform: translateY(-2px);
        }
        
        .btn-test {
            background: #2196F3;
            color: white;
        }
        
        .btn-test:hover {
            background: #1976D2;
        }
        
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 12px;
            display: none;
        }
        
        .result.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .result.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .result.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .device-info {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 13px;
        }
        
        .url-display {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            font-family: monospace;
            font-size: 11px;
            word-break: break-all;
            margin-top: 10px;
        }
        
        .instructions {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
        }
        
        .instructions h4 {
            color: #0066cc;
            margin-bottom: 10px;
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Debug WhatsApp Links</h1>
        
        <div class="device-info" id="deviceInfo">
            <strong>Informa√ß√µes do Dispositivo:</strong><br>
            <span id="deviceDetails">Carregando...</span>
        </div>
        
        <!-- Teste 1: Links Diretos HTML -->
        <div class="test-group">
            <h3>üì± Teste 1: Links HTML Diretos</h3>
            <p>Clique nos links abaixo (m√©todo mais confi√°vel):</p>
            
            <a href="https://wa.me/5569993705343?text=Ol√°! Sou cliente e gostaria de contratar um profissional atrav√©s da ConectaPro." 
               target="_blank" 
               rel="noopener noreferrer" 
               class="btn btn-whatsapp"
               onclick="logClick('HTML - Cliente')">
                üë§ Sou Cliente
            </a>
            
            <a href="https://wa.me/5569993705343?text=Ol√°! Sou profissional da constru√ß√£o e gostaria de me cadastrar na ConectaPro." 
               target="_blank" 
               rel="noopener noreferrer" 
               class="btn btn-whatsapp"
               onclick="logClick('HTML - Profissional')">
                üîß Sou Profissional
            </a>
            
            <a href="https://wa.me/5569993705343?text=Ol√°! Tenho d√∫vidas sobre a ConectaPro." 
               target="_blank" 
               rel="noopener noreferrer" 
               class="btn btn-whatsapp"
               onclick="logClick('HTML - D√∫vidas')">
                ‚ùì Tenho D√∫vidas
            </a>
            
            <div class="result" id="result1"></div>
        </div>
        
        <!-- Teste 2: JavaScript window.open -->
        <div class="test-group">
            <h3>üîß Teste 2: JavaScript window.open</h3>
            <p>Teste usando JavaScript (m√©todo do site original):</p>
            
            <button class="btn btn-test" onclick="testJavaScript('cliente')">
                JS - Sou Cliente
            </button>
            
            <button class="btn btn-test" onclick="testJavaScript('profissional')">
                JS - Sou Profissional
            </button>
            
            <button class="btn btn-test" onclick="testJavaScript('duvidas')">
                JS - Tenho D√∫vidas
            </button>
            
            <div class="result" id="result2"></div>
        </div>
        
        <!-- Teste 3: Protocolo whatsapp:// -->
        <div class="test-group">
            <h3>üì≤ Teste 3: Protocolo whatsapp://</h3>
            <p>Teste usando protocolo nativo (funciona melhor no mobile):</p>
            
            <button class="btn btn-test" onclick="testNativeProtocol()">
                üì± Teste Protocolo Nativo
            </button>
            
            <div class="result" id="result3"></div>
        </div>
        
        <!-- Teste 4: location.href -->
        <div class="test-group">
            <h3>üåê Teste 4: location.href</h3>
            <p>Teste usando redirecionamento direto:</p>
            
            <button class="btn btn-test" onclick="testLocationHref()">
                üîÑ Teste Redirecionamento
            </button>
            
            <div class="result" id="result4"></div>
        </div>
        
        <div class="instructions">
            <h4>üìã Como Interpretar os Resultados:</h4>
            <ol>
                <li><strong>Se os links HTML funcionarem:</strong> O problema est√° no JavaScript do site</li>
                <li><strong>Se nenhum link funcionar:</strong> WhatsApp n√£o est√° instalado ou h√° bloqueio do navegador</li>
                <li><strong>Se apenas o protocolo nativo funcionar:</strong> Use whatsapp:// para mobile</li>
                <li><strong>Se apenas location.href funcionar:</strong> Popups est√£o bloqueados</li>
            </ol>
            
            <h4>üîß Solu√ß√µes por Resultado:</h4>
            <ul>
                <li><strong>Popup bloqueado:</strong> Usar links HTML ou location.href</li>
                <li><strong>WhatsApp n√£o instalado:</strong> Instalar o app ou usar WhatsApp Web</li>
                <li><strong>JavaScript com erro:</strong> Verificar console do navegador (F12)</li>
            </ul>
        </div>
    </div>

    <script>
        // Detecta informa√ß√µes do dispositivo
        function detectDevice() {
            const userAgent = navigator.userAgent;
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
            const isIOS = /iPad|iPhone|iPod/.test(userAgent);
            const isAndroid = /Android/.test(userAgent);
            const isDesktop = !isMobile;
            
            let deviceType = 'Desktop';
            if (isIOS) deviceType = 'iOS';
            else if (isAndroid) deviceType = 'Android';
            else if (isMobile) deviceType = 'Mobile';
            
            const info = {
                type: deviceType,
                userAgent: userAgent,
                platform: navigator.platform,
                language: navigator.language,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine,
                windowOpen: typeof window.open !== 'undefined',
                clipboard: typeof navigator.clipboard !== 'undefined'
            };
            
            return info;
        }
        
        // Exibe informa√ß√µes do dispositivo
        function displayDeviceInfo() {
            const info = detectDevice();
            const details = `
                Tipo: ${info.type}<br>
                Plataforma: ${info.platform}<br>
                Idioma: ${info.language}<br>
                Cookies: ${info.cookieEnabled ? '‚úÖ' : '‚ùå'}<br>
                Online: ${info.onLine ? '‚úÖ' : '‚ùå'}<br>
                window.open: ${info.windowOpen ? '‚úÖ' : '‚ùå'}<br>
                Clipboard API: ${info.clipboard ? '‚úÖ' : '‚ùå'}
            `;
            
            document.getElementById('deviceDetails').innerHTML = details;
            console.log('üì± Device Info:', info);
        }
        
        // Log de cliques
        function logClick(method) {
            console.log(`üîó Link clicado: ${method}`);
            const result = document.getElementById('result1');
            result.className = 'result info';
            result.style.display = 'block';
            result.innerHTML = `‚úÖ Link "${method}" clicado √†s ${new Date().toLocaleTimeString()}`;
        }
        
        // Teste JavaScript
        function testJavaScript(type) {
            const messages = {
                cliente: "Ol√°! Sou cliente e gostaria de contratar um profissional atrav√©s da ConectaPro.",
                profissional: "Ol√°! Sou profissional da constru√ß√£o e gostaria de me cadastrar na ConectaPro.",
                duvidas: "Ol√°! Tenho d√∫vidas sobre a ConectaPro."
            };
            
            const message = messages[type];
            const number = "5569993705343";
            const result = document.getElementById('result2');
            
            try {
                console.log(`üîß Teste JS iniciado: ${type}`);
                
                const encodedMessage = encodeURIComponent(message);
                const url = `https://wa.me/${number}?text=${encodedMessage}`;
                
                console.log(`üì± URL: ${url}`);
                
                const newWindow = window.open(url, '_blank', 'noopener,noreferrer');
                
                if (newWindow) {
                    result.className = 'result success';
                    result.innerHTML = `‚úÖ window.open funcionou!<div class="url-display">${url}</div>`;
                } else {
                    result.className = 'result error';
                    result.innerHTML = `‚ùå window.open bloqueado<div class="url-display">${url}</div>`;
                }
                
                result.style.display = 'block';
                
            } catch (error) {
                console.error('‚ùå Erro no teste JS:', error);
                result.className = 'result error';
                result.innerHTML = `‚ùå Erro: ${error.message}`;
                result.style.display = 'block';
            }
        }
        
        // Teste protocolo nativo
        function testNativeProtocol() {
            const message = "Ol√°! Teste do protocolo nativo whatsapp://";
            const number = "5569993705343";
            const result = document.getElementById('result3');
            
            try {
                const encodedMessage = encodeURIComponent(message);
                const nativeUrl = `whatsapp://send?phone=${number}&text=${encodedMessage}`;
                
                console.log(`üì≤ URL nativa: ${nativeUrl}`);
                
                window.location.href = nativeUrl;
                
                result.className = 'result info';
                result.innerHTML = `üì± Tentativa de protocolo nativo executada<div class="url-display">${nativeUrl}</div>`;
                result.style.display = 'block';
                
                // Fallback para web ap√≥s 3 segundos
                setTimeout(() => {
                    const webUrl = `https://wa.me/${number}?text=${encodedMessage}`;
                    console.log(`üåê Fallback para: ${webUrl}`);
                    window.open(webUrl, '_blank');
                }, 3000);
                
            } catch (error) {
                console.error('‚ùå Erro no protocolo nativo:', error);
                result.className = 'result error';
                result.innerHTML = `‚ùå Erro: ${error.message}`;
                result.style.display = 'block';
            }
        }
        
        // Teste location.href
        function testLocationHref() {
            const message = "Ol√°! Teste usando location.href";
            const number = "5569993705343";
            const result = document.getElementById('result4');
            
            try {
                const encodedMessage = encodeURIComponent(message);
                const url = `https://wa.me/${number}?text=${encodedMessage}`;
                
                console.log(`üîÑ Redirecionando para: ${url}`);
                
                result.className = 'result info';
                result.innerHTML = `üîÑ Redirecionamento executado<div class="url-display">${url}</div>`;
                result.style.display = 'block';
                
                // Aguarda um pouco para mostrar o resultado
                setTimeout(() => {
                    window.location.href = url;
                }, 1000);
                
            } catch (error) {
                console.error('‚ùå Erro no redirecionamento:', error);
                result.className = 'result error';
                result.innerHTML = `‚ùå Erro: ${error.message}`;
                result.style.display = 'block';
            }
        }
        
        // Inicializa a p√°gina
        window.addEventListener('load', function() {
            displayDeviceInfo();
            console.log('üß™ P√°gina de debug carregada');
            console.log('üì± Teste todos os m√©todos para identificar qual funciona');
        });
    </script>
</body>
</html> 