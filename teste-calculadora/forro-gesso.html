<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Forro de Gesso - ConectaPro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .cartao {
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            padding: 32px;
            margin-bottom: 24px;
        }
        .item-composicao {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.2s;
        }
        .item-composicao:hover {
            background-color: #f9f9f9;
            border-color: #d1d5db;
        }
        .bg-gradient-custom {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        /* Header Suspenso */
        .header-suspenso {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
            z-index: 1000;
            padding: 0.75rem 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .nav-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            align-items: center;
        }
        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .nav-btn:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        .nav-btn.secondary {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
        }
        .nav-btn.secondary:hover {
            background: linear-gradient(135deg, #4b5563 0%, #374151 100%);
            box-shadow: 0 4px 12px rgba(107, 114, 128, 0.3);
        }
        body {
            padding-top: 4rem;
        }
        @media (max-width: 640px) {
            .nav-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            body {
                padding-top: 6rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header Suspenso -->
    <div class="header-suspenso">
        <div class="nav-buttons">
            <button onclick="voltarCalculadoras()" class="nav-btn">
                üßÆ Voltar √†s Calculadoras
            </button>
            <button onclick="irConectaPro()" class="nav-btn secondary">
                üè† ConectaPro
            </button>
        </div>
    </div>
    
    <div class="min-h-screen py-8">
        <div class="max-w-4xl mx-auto px-4">
            <!-- Cabe√ßalho -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">
                    üè† Calculadora de Forro de Gesso
                </h1>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Compare pre√ßos entre composi√ß√£o oficial SINAPI e valores de mercado local para instala√ß√£o de forro de gesso em ambientes residenciais
                </p>
            </div>

            <!-- Sele√ß√£o de Modalidade -->
            <div class="cartao">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                    Escolha a Modalidade de Or√ßamento
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div id="btn-sinapi" onclick="selecionarModalidade('sinapi')" 
                         class="p-4 border-2 border-gray-200 rounded-xl transition-all text-center hover:shadow-lg cursor-pointer">
                        <div class="text-3xl mb-3">üèõÔ∏è</div>
                        <h3 class="font-bold text-xl text-blue-600 mb-2">SINAPI Oficial</h3>
                        <p class="text-gray-600 text-sm mb-3">Composi√ß√£o t√©cnica oficial da Caixa Econ√¥mica Federal</p>
                        <div class="text-xs text-gray-500">
                            <div>‚Ä¢ Gesseiro com encargos sociais</div>
                            <div>‚Ä¢ Servente com encargos sociais</div>
                            <div>‚Ä¢ Materiais t√©cnicos especificados</div>
                            <div>‚Ä¢ Valores atualizados 05/2025</div>
                        </div>
                    </div>
                    
                    <div id="btn-mercado" onclick="selecionarModalidade('mercado')" 
                         class="p-4 border-2 border-blue-500 bg-blue-50 rounded-xl transition-all text-center shadow-lg cursor-pointer">
                        <div class="text-3xl mb-3">üè™</div>
                        <h3 class="font-bold text-xl text-green-600 mb-2">Mercado Local</h3>
                        <p class="text-gray-600 text-sm mb-3">Valores praticados por profissionais aut√¥nomos</p>
                        <div class="text-xs text-gray-500">
                            <div>‚Ä¢ Gesseiro aut√¥nomo</div>
                            <div>‚Ä¢ Servente aut√¥nomo</div>
                            <div>‚Ä¢ Materiais em unidades pr√°ticas</div>
                            <div>‚Ä¢ Pre√ßos de mercado real</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Entrada de Dados -->
            <div class="cartao">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                    üìè √Årea do Forro
                </h3>
                
                <div class="max-w-md mx-auto">
                    <div class="mb-6">
                        <label for="area" class="block text-lg font-semibold text-gray-700 mb-2">
                            √Årea Total (m¬≤)
                        </label>
                        <input type="number" 
                               id="area" 
                               placeholder="Ex: 25.5" 
                               step="0.1" 
                               min="1"
                               class="w-full p-4 text-xl border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors">
                        <div class="text-sm text-gray-500 mt-2">
                            üí° Informe a √°rea total do ambiente onde ser√° instalado o forro
                        </div>
                    </div>
                    
                    <button onclick="calcularForro()" 
                            class="w-full bg-gradient-custom text-white font-bold py-4 px-6 rounded-lg text-xl hover:opacity-90 transition-opacity">
                        üßÆ Calcular Or√ßamento
                    </button>
                </div>
            </div>

            <!-- Resultado -->
            <div id="resultado" class="hidden">
                <!-- Resultado Principal -->
                <div class="cartao bg-gradient-custom text-white text-center">
                    <h3 class="text-3xl font-bold mb-4">
                        Or√ßamento para <span id="resultado-area">0 m¬≤</span>
                    </h3>
                    <div class="text-6xl font-bold mb-2" id="resultado-valor">
                        R$ 0,00/m¬≤
                    </div>
                    <div class="text-xl opacity-90" id="tipo-orcamento">
                        Modalidade
                    </div>
                </div>

                <!-- Composi√ß√£o Detalhada -->
                <div class="cartao">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                        üîç Composi√ß√£o Detalhada SINAPI
                    </h3>
                    
                    <div class="space-y-6">
                        <!-- M√£o de Obra -->
                        <div>
                            <h4 class="text-xl font-bold text-red-600 mb-4 flex items-center">
                                <span class="mr-2">üë∑</span> M√£o de Obra
                            </h4>
                            <div class="space-y-3">
                                <div class="item-composicao">
                                    <div class="flex-1">
                                        <div class="font-semibold" id="gesseiro-titulo">Gesseiro</div>
                                        <div class="text-sm text-gray-600" id="gesseiro-descricao"></div>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-bold text-red-600" id="gesseiro-valor"></div>
                                    </div>
                                </div>
                                
                                <div class="item-composicao">
                                    <div class="flex-1">
                                        <div class="font-semibold" id="servente-titulo">Servente</div>
                                        <div class="text-sm text-gray-600" id="servente-descricao"></div>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-bold text-red-600" id="servente-valor"></div>
                                    </div>
                                </div>
                                
                                <!-- Total M√£o de Obra -->
                                <div class="border-t border-red-300 mt-3 pt-3">
                                    <div class="item-composicao bg-blue-50 border-blue-500">
                                        <div class="flex-1">
                                            <div class="font-bold text-blue-800">TOTAL M√ÉO DE OBRA</div>
                                            <div class="text-sm text-blue-600" id="total-mao-obra-m2">R$ 0,00/m¬≤</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-blue-600 text-xl" id="total-mao-obra"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Materiais -->
                        <div>
                            <h4 class="text-xl font-bold text-red-600 mb-4 flex items-center">
                                <span class="mr-2">üß±</span> Materiais
                            </h4>
                            <div class="space-y-3">
                                <!-- Componentes din√¢micos -->
                                <div id="componentes-dinamicos"></div>
                                
                                <!-- Total Materiais -->
                                <div class="border-t border-red-300 mt-3 pt-3">
                                    <div class="item-composicao bg-green-50 border-green-500">
                                        <div class="flex-1">
                                            <div class="font-bold text-green-800">TOTAL MATERIAIS</div>
                                            <div class="text-sm text-green-600" id="total-materiais-m2">R$ 0,00/m¬≤</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-green-600 text-xl" id="total-materiais"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Total Geral -->
                        <div class="border-t-2 border-red-200 pt-4">
                            <div class="item-composicao bg-red-100 border-red-500">
                                <div class="flex-1">
                                    <div class="font-bold text-lg">TOTAL GERAL</div>
                                    <div class="text-sm text-red-600" id="total-geral-m2">R$ 0,00/m¬≤</div>
                                </div>
                                <div class="text-right">
                                    <div class="font-bold text-red-600 text-2xl" id="total-geral-valor"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('üè† Calculadora de Forro de Gesso iniciada!');

        // Duas modalidades de or√ßamento - 05/2025
        const modalidades = {
            sinapi: {
                nome: "SINAPI Oficial (Caixa Econ√¥mica)",
                composicao: {
                    gesseiro: { descricao: "Gesseiro com Encargos", valor_hora: 27.08, coeficiente: 0.9123 },
                    servente: { descricao: "Servente com Encargos", valor_hora: 23.98, coeficiente: 0.5244 },
                    arame: { descricao: "Arame Galvanizado 18 BWG", valor_kg: 39.67, coeficiente: 0.0217 },
                    gesso: { descricao: "Gesso em P√≥ para Revestimentos", valor_kg: 1.13, coeficiente: 1.8127 },
                    parafuso: { descricao: "Parafuso Zincado Autobroc. 4,2x19mm", valor_cento: 31.06, coeficiente: 0.0293 },
                    placa: { descricao: "Placa de Gesso p/ Forro 60x60cm", valor_m2: 15.82, coeficiente: 1.0414 },
                    sisal: { descricao: "Sisal em Fibra/Estopa p/ Gesso", valor_kg: 19.95, coeficiente: 0.0078 }
                }
            },
            mercado: {
                nome: "Mercado Local (Profissionais Aut√¥nomos)",
                composicao: {
                    gesseiro: { descricao: "Gesseiro", valor_hora: 25.00, coeficiente: 1.0 },
                    servente: { descricao: "Servente", valor_hora: 18.00, coeficiente: 0.5 },
                    arame: { descricao: "Arame Galvanizado", valor_kg: 35.00, coeficiente: 0.025 },
                    gesso: { descricao: "Gesso em P√≥", valor_kg: 1.20, coeficiente: 2.0 },
                    parafuso: { descricao: "Parafusos Autobroc.", valor_cento: 25.00, coeficiente: 0.03 },
                    placa: { descricao: "Placas de Gesso 60x60cm", valor_m2: 18.00, coeficiente: 1.05 },
                    sisal: { descricao: "Sisal/Fibra", valor_kg: 15.00, coeficiente: 0.01 }
                }
            }
        };

        let modalidadeSelecionada = 'mercado';

        function selecionarModalidade(tipo) {
            console.log('Selecionando modalidade:', tipo);
            modalidadeSelecionada = tipo;
            
            // Atualizar visual dos bot√µes
            document.getElementById('btn-sinapi').className = 'p-4 border-2 border-gray-200 rounded-xl transition-all text-center hover:shadow-lg cursor-pointer';
            document.getElementById('btn-mercado').className = 'p-4 border-2 border-gray-200 rounded-xl transition-all text-center hover:shadow-lg cursor-pointer';
            
            if (tipo === 'sinapi') {
                document.getElementById('btn-sinapi').className = 'p-4 border-2 border-blue-500 bg-blue-50 rounded-xl transition-all text-center shadow-lg cursor-pointer';
            } else {
                document.getElementById('btn-mercado').className = 'p-4 border-2 border-blue-500 bg-blue-50 rounded-xl transition-all text-center shadow-lg cursor-pointer';
            }
        }

        function calcularForro() {
            console.log('üßÆ Calculando forro de gesso...');
            
            const area = parseFloat(document.getElementById('area').value) || 0;
            
            console.log('√Årea:', area);
            
            if (area === 0) {
                alert('‚ö†Ô∏è Por favor, informe a √°rea do forro!');
                return;
            }

            const dados = modalidades[modalidadeSelecionada];
            const comp = dados.composicao;
            
            console.log('Modalidade:', modalidadeSelecionada, dados);
            
            // C√°lculos da m√£o de obra
            const gesseiroHoras = area * comp.gesseiro.coeficiente;
            const serventeHoras = area * comp.servente.coeficiente;
            const gesseiroValor = gesseiroHoras * comp.gesseiro.valor_hora;
            const serventeValor = serventeHoras * comp.servente.valor_hora;
            
            // C√°lculos dos materiais
            const arameQuantidade = area * comp.arame.coeficiente;
            const gessoQuantidade = area * comp.gesso.coeficiente;
            const parafusoQuantidade = area * comp.parafuso.coeficiente;
            const placaQuantidade = area * comp.placa.coeficiente;
            const sisalQuantidade = area * comp.sisal.coeficiente;
            
            const arameValor = arameQuantidade * comp.arame.valor_kg;
            const gessoValor = gessoQuantidade * comp.gesso.valor_kg;
            const parafusoValor = parafusoQuantidade * comp.parafuso.valor_cento;
            const placaValor = placaQuantidade * comp.placa.valor_m2;
            const sisalValor = sisalQuantidade * comp.sisal.valor_kg;
            
            // Preparar componentes para exibi√ß√£o
            const componentes = [
                { nome: comp.arame.descricao, qtd: arameQuantidade, unidade: 'kg', valor: arameValor, tipo: 'material' },
                { nome: comp.gesso.descricao, qtd: gessoQuantidade, unidade: 'kg', valor: gessoValor, tipo: 'material' },
                { nome: comp.parafuso.descricao, qtd: parafusoQuantidade, unidade: 'cento', valor: parafusoValor, tipo: 'material' },
                { nome: comp.placa.descricao, qtd: placaQuantidade, unidade: 'm¬≤', valor: placaValor, tipo: 'material' },
                { nome: comp.sisal.descricao, qtd: sisalQuantidade, unidade: 'kg', valor: sisalValor, tipo: 'material' }
            ];
            
            // Calcular valor por m¬≤
            const totalMaoObra = gesseiroValor + serventeValor;
            const totalMateriais = arameValor + gessoValor + parafusoValor + placaValor + sisalValor;
            const totalGeral = totalMaoObra + totalMateriais;
            const valorPorM2 = totalGeral / area;
            
            // Mostrar resultado principal
            document.getElementById('resultado-area').textContent = `${area.toFixed(1)} m¬≤`;
            document.getElementById('resultado-valor').textContent = `R$ ${valorPorM2.toFixed(2)}/m¬≤`;
            document.getElementById('tipo-orcamento').textContent = dados.nome;
            
            // Preencher m√£o de obra
            document.getElementById('gesseiro-titulo').textContent = comp.gesseiro.descricao;
            document.getElementById('gesseiro-descricao').textContent = `${gesseiroHoras.toFixed(1)}h √ó R$ ${comp.gesseiro.valor_hora.toFixed(2)}`;
            document.getElementById('gesseiro-valor').textContent = `R$ ${gesseiroValor.toFixed(2)}`;
            
            document.getElementById('servente-titulo').textContent = comp.servente.descricao;
            document.getElementById('servente-descricao').textContent = `${serventeHoras.toFixed(1)}h √ó R$ ${comp.servente.valor_hora.toFixed(2)}`;
            document.getElementById('servente-valor').textContent = `R$ ${serventeValor.toFixed(2)}`;
            
            // Preencher componentes materiais
            const containerDinamicos = document.getElementById('componentes-dinamicos');
            containerDinamicos.innerHTML = '';
            
            componentes.forEach(comp => {
                const div = document.createElement('div');
                div.className = 'item-composicao';
                
                let descricaoDetalhe = '';
                const qtdTexto = comp.qtd.toFixed(comp.qtd < 1 ? 3 : 2);
                const unidadeTexto = comp.unidade || 'unidades';
                descricaoDetalhe = `${qtdTexto} ${unidadeTexto}`;
                
                div.innerHTML = `
                    <div class="flex-1">
                        <div class="font-semibold">${comp.nome}</div>
                        <div class="text-sm text-gray-600">${descricaoDetalhe}</div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-red-600">R$ ${comp.valor.toFixed(2)}</div>
                    </div>
                `;
                
                containerDinamicos.appendChild(div);
            });
            
            // Calcular pre√ßos por m¬≤
            const maoObraM2 = totalMaoObra / area;
            const materiaisM2 = totalMateriais / area;
            const totalM2 = totalGeral / area;
            
            // Exibir totais
            document.getElementById('total-mao-obra').innerHTML = 
                `<span class="text-sm text-gray-500">R$</span> ${totalMaoObra.toFixed(2)}`;
            document.getElementById('total-mao-obra-m2').textContent = 
                `R$ ${maoObraM2.toFixed(2)}/m¬≤`;
                
            document.getElementById('total-materiais').innerHTML = 
                `<span class="text-sm text-gray-500">R$</span> ${totalMateriais.toFixed(2)}`;
            document.getElementById('total-materiais-m2').textContent = 
                `R$ ${materiaisM2.toFixed(2)}/m¬≤`;
                
            document.getElementById('total-geral-valor').innerHTML = 
                `<span class="text-sm text-gray-500">R$</span> ${totalGeral.toFixed(2)}`;
            document.getElementById('total-geral-m2').textContent = 
                `R$ ${totalM2.toFixed(2)}/m¬≤`;
            
            document.getElementById('resultado').classList.remove('hidden');
            document.getElementById('resultado').scrollIntoView({ behavior: 'smooth' });
            
            console.log('‚úÖ C√°lculo de forro conclu√≠do:', totalGeral);
        }

        // Fun√ß√µes de navega√ß√£o
        function voltarCalculadoras() {
            window.location.href = 'index.html';
        }
        
        function irConectaPro() {
            // Tentar ir para a p√°gina principal do ConectaPro
            if (window.opener) {
                window.opener.location.href = '../src/app/page.tsx';
                window.close();
            } else {
                window.open('../src/app/page.tsx', '_blank');
            }
        }

        console.log('üè† Calculadora de Forro carregada!');
    </script>
</body>
</html>